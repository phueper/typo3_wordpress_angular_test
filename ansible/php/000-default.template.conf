# for local callbacks from php to the server URL we need to listen on :10080 as well:
Listen 10080

# and have the VirtualHost for both ports
<VirtualHost *:80 *:10080>
    # The ServerName directive sets the request scheme, hostname and port that
    # the server uses to identify itself. This is used when creating
    # redirection URLs. In the context of virtual hosts, the ServerName
    # specifies what hostname must appear in the request's Host: header to
    # match this virtual host. For the default virtual host (this file) this
    # value is not decisive as it is used as a last resort host regardless.
    # However, you must set it for any further virtual host explicitly.
    #ServerName www.example.com

    ServerAdmin webmaster@localhost
    
    # root
    DocumentRoot /vagrant/web/

    <Directory /vagrant/web/ >
      Options Indexes FollowSymLinks MultiViews
      DirectoryIndex index.php
      AllowOverride All
      Order deny,allow
      Deny from none
      Allow from all
      Require all granted
    </Directory>

    # typo3
    Alias /t3 /vagrant/typo3/web/

    <Directory /vagrant/typo3/web/ >
      Options Indexes FollowSymLinks MultiViews
      DirectoryIndex index.php
      AllowOverride All
      Order deny,allow
      Deny from none
      Allow from all
      Require all granted
    </Directory>
    
    # wordpress
    Alias /wp /vagrant/wordpress/wordpress/
    
    <Directory /vagrant/wordpress/wordpress/ >
      Options Indexes FollowSymLinks MultiViews
      DirectoryIndex index.php
      AllowOverride All
      Order deny,allow
      Deny from none
      Allow from all
      Require all granted
    </Directory>

   # Available loglevels: trace8, ..., trace1, debug, info, notice, warn,
   # error, crit, alert, emerg.
   # It is also possible to configure the loglevel for particular
   # modules, e.g.
   #LogLevel info ssl:warn

   ErrorLog /vagrant/logs/apache.error.log
   
   CustomLog /vagrant/logs/apache.access.log common
   
   LogLevel warn rewrite:trace2
   
   php_value error_log /vagrant/logs/php.error.log
   php_flag log_errors on
   php_flag display_errors on
   # error_reporting value:
   # 1		E_ERROR	Fatal run time error. Non recoverable.
   # 2		E_WARNING	Run time warning that should not affect program flow.
   # 4		E_PARSE	Parse error
   # 8		E_NOTICE	Notice. Notices indicate a potential error, but could also happen during normal program flow.
   # 16		E_CORE_ERROR	Fatal error during PHP startup
   # 32		E_CORE_WARNING	Similar to a warning, but occurs during PHP startup.
   # 64		E_COMPILE_ERROR	Fatal compile error. Similar to E_ERROR, but generated by Zend.
   # 128	E_COMPILE_WARNING	Compile Warning
   # 256	E_USER_ERROR	Error message generated through trigger_error()
   # 512	E_USER_WARNING	Warning message generated through trigger_error()
   # 1024	E_USER_NOTICE	Notice message generated through trigger_error()
   # 4096	E_RECOVERABLE_ERROR	Fatal error, but may be recoverable. Has to be caught by user defined error handler or it will default to an E_ERROR.
   # 8192	E_DEPRECATED	Warning that code may not work in future PHP versions.
   # 16384	E_USER_DEPRECATED	Deprecated message generated through trigger_error()
   php_value error_reporting 30719
   
   # settings for typo3 from installation
   php_value upload_max_filesize "10M"
   php_value post_max_size "10M"
   php_value xdebug.max_nesting_level 500
   php_value max_execution_time 300

   # For most configuration files from conf-available/, which are
   # enabled or disabled at a global level, it is possible to
   # include a line for only one particular virtual host. For example the
   # following line enables the CGI configuration for this host only
   # after it has been globally disabled with "a2disconf".
   #Include conf-available/serve-cgi-bin.conf
</VirtualHost>